# Posts & Comments API

Задание на Django + DRF.

API позволяет пользователям регистрироваться, создавать посты и комментировать их с учетом прав доступа и валидаций.

---

## Стек технологий

- Python 3.8+
- Django 3+
- Django REST Framework 3.14+
- PostgreSQL 10+

---

## Функционал

### Пользователи
- Регистрация
- Просмотр пользователей (только авторизованные)
- Редактирование только своего профиля
- Удаление пользователя — только администратор

### Посты
- Создание постов авторизованными пользователями
- Просмотр постов доступен всем
- Редактирование поста — только автор или администратор
- Удаление поста — только автор или администратор
- Поддержка изображений
- Комментарии к посту отображаются при детальном просмотре конкретного поста

### Комментарии
- Создание комментариев авторизованными пользователями
- Просмотр комментариев доступен всем
- Редактирование и удаление — только автор или администратор

---

## Валидации

### Пользователь
- Пароль не менее 8 символов и содержит цифры
- Email только с доменами:
  - mail.ru
  - yandex.ru

### Пост
- Автору должно быть не менее 18 лет
- Запрещены слова в заголовке:
  - ерунда
  - глупость
  - чепуха

---


## Админ-панель

- Отображение и ссылка на автора поста
- Фильтрация постов по дате создания

---

## Установка и запуск проекта

### 1. Клонирование репозитория

```bash
git clone https://github.com/xzista/Project10
cd project
```

### 2. Установка зависимостей с использованием Poetry

```bash
poetry install
```

### 3. Настройка базы данных

В `.env` указать параметры для PostgreSQL по примеру .env.sample:

### 4. Миграции

```bash
python manage.py makemigrations
python manage.py migrate
```

### 5. Запуск сервера

```bash
python manage.py runserver
```

---

## Заполнение тестовыми данными

### Создание пользователей

Команда создаёт несколько пользователей включая admin:

```bash
python manage.py create_test_users
```

Для постов и комментариев созданы фикстуры:
```bash
python manage.py loaddata fixtures/posts.json
python manage.py loaddata fixtures/comments.json
```
---
### Эндпоинты


- /api/users/
- /api/posts/
- /api/comments/
- /admin/